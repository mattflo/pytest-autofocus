<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title | default: site.title }}</title>
    <meta name="description" content="{{ site.description }}">
    <link rel="stylesheet" href="{{ '/assets/style.css' | relative_url }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&family=JetBrains+Mono:wght@400&display=swap"
        rel="stylesheet">
</head>

<body>
    <header>
        <nav>
            <a href="https://github.com/mattflo/pytest-autofocus" title="GitHub" aria-label="GitHub">
                <img src="{{ '/assets/github-mark/github-mark.svg' | relative_url }}" alt="GitHub" width="28"
                    height="28">
            </a>
        </nav>
    </header>
    <nav class="floating-nav" aria-label="Page navigation">
        <a href="#the-problem" class="nav-item">The problem</a>
        <a href="#the-solution" class="nav-item">The solution</a>
        <a href="#but-ai" class="nav-item">But AI</a>
        <a href="#install" class="nav-item">Install</a>
        <a href="#usage" class="nav-item">Usage</a>
    </nav>
    <main>
        {{ content }}
    </main>
    <footer>
        MIT License
    </footer>
    <script>
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const id = entry.target.getAttribute('id');
                const navItem = document.querySelector(`.floating-nav a[href="#${id}"]`);
                if (entry.isIntersecting) {
                    document.querySelectorAll('.floating-nav a').forEach(a => a.classList.remove('active'));
                    navItem?.classList.add('active');
                }
            });
        }, { rootMargin: '-100px 0px -66%' });

        document.querySelectorAll('h2[id]').forEach(h2 => observer.observe(h2));
    </script>
</body>

</html>